<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Penilaian Praktikum - FISLAB II</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="top-left-header" aria-label="Brand header">
        <button id="hamburger" class="hamburger" type="button" aria-label="Buka menu" aria-controls="sidebar" aria-expanded="false">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>
        <a href="home.html" class="header-brand-link" aria-label="Kembali ke Home">
            <span class="header-logo">Φ</span>
            <span class="header-text">FISLAB II</span>
        </a>
    </header>
    <div class="top-border-box" aria-hidden="true"></div>
    <button id="mode-toggle" class="mode-toggle" type="button" aria-label="Toggle night mode">
        <svg class="icon sun-icon" viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
        </svg>
        <svg class="icon moon-icon" viewBox="0 0 24 24" aria-hidden="true" style="display: none;">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
    </button>

    <aside id="sidebar" class="sidebar" aria-label="Sidebar navigasi">
        <div class="side-title">Menu</div>
        <nav>
            <a href="profile.html" id="nav-profile">
                <span class="icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                    </svg>
                </span>
                <span class="label">Profile</span>
            </a>
            <a href="home.html" id="nav-home">
                <span class="icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24">
                        <rect x="3" y="3" width="8" height="8" rx="1"/>
                        <rect x="13" y="3" width="8" height="8" rx="1"/>
                        <rect x="3" y="13" width="8" height="8" rx="1"/>
                        <rect x="13" y="13" width="8" height="8" rx="1"/>
                    </svg>
                </span>
                <span class="label">Dashboard</span>
            </a>
            <a href="admin.html" id="nav-admin" style="display: none;">
                <span class="icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24">
                        <rect x="3" y="3" width="8" height="8" rx="1"/>
                        <rect x="13" y="3" width="8" height="8" rx="1"/>
                        <rect x="3" y="13" width="8" height="8" rx="1"/>
                        <rect x="13" y="13" width="8" height="8" rx="1"/>
                    </svg>
                </span>
                <span class="label">Dashboard Admin</span>
            </a>
            <a href="modul.html" id="nav-modul">
                <span class="icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24">
                        <rect x="3" y="4" width="8" height="16" rx="1"/>
                        <rect x="13" y="4" width="8" height="16" rx="1"/>
                    </svg>
                </span>
                <span class="label">Modul Praktikum</span>
            </a>
            <a href="kontak.html" id="nav-contacts">
                <span class="icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24">
                        <rect x="3" y="5" width="18" height="14" rx="1"/>
                        <path d="M3 7l9 6 9-6"/>
                    </svg>
                </span>
                <span class="label">Kontak Asisten Laboratorium</span>
            </a>
            <a href="nilai.html" id="nav-nilai" style="display: none;">
                <span class="icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24">
                        <path d="M9 12l2 2 4-4"/>
                        <path d="M21 12c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                    </svg>
                </span>
                <span class="label">Nilai Praktikum</span>
            </a>
            <a href="penilaian.html" id="nav-penilaian" class="active">
                <span class="icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24">
                        <path d="M9 12l2 2 4-4"/>
                        <path d="M21 12c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                    </svg>
                </span>
                <span class="label">Penilaian Praktikum</span>
            </a>
            <a href="penjadwal.html" id="nav-penjadwalan" style="display: none;">
                <span class="icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24">
                        <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
                        <path d="M12 11h4"/>
                        <rect x="8" y="2" width="8" height="4" rx="1"/>
                    </svg>
                </span>
                <span class="label">Penjadwalan</span>
            </a>
            <a href="jadwal.html" id="nav-schedule">
                <span class="icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24">
                        <rect x="3" y="4" width="18" height="17" rx="1"/>
                        <path d="M8 2v4M16 2v4M3 10h18"/>
                    </svg>
                </span>
                <span class="label">Jadwal Praktikum</span>
            </a>
            <a href="#" id="nav-logout">
                <span class="icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24">
                        <path d="M10 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h5"/>
                        <path d="M14 16l4-4-4-4"/>
                        <path d="M8 12h10"/>
                    </svg>
                </span>
                <span class="label">Keluar</span>
            </a>
        </nav>
    </aside>
    <div id="sidebar-overlay" class="sidebar-overlay" aria-hidden="true"></div>

    <main class="main-content">

        <section class="assessment-form">
            <h2 class="form-title">Form Penilaian</h2>
            <form id="assessment-form">
                <!-- Identity Section: Avatar + Kelompok & Praktikan -->
                <div class="assessment-identity">
                    <div class="assessment-avatar-wrap">
                        <img id="praktikan-avatar" class="assessment-avatar" src="https://ui-avatars.com/api/?name=Praktikan&background=e2e8f0&size=120" alt="Avatar praktikan" width="120" height="120">
                    </div>
                    <div class="assessment-identity-fields">
                        <div class="form-group">
                            <label for="kelompok">Kelompok</label>
                            <select id="kelompok" name="kelompok" required>
                                <option value="">Pilih Kelompok</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="praktikan">Nama Praktikan</label>
                            <select id="praktikan" name="praktikan" required>
                                <option value="">Pilih Praktikan</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Scoring Section: 2-column grid -->
                <div class="assessment-scoring-section">
                    <h3 class="scoring-section-title">Input Nilai</h3>
                    <div class="assessment-scoring-grid">
                        <div class="form-group">
                            <label for="pre-lab">Nilai Pre-lab (0-100) — bobot 10%</label>
                            <input type="number" id="pre-lab" name="pre-lab" min="0" max="100" placeholder="contoh: 80">
                        </div>
                        <div class="form-group">
                            <label for="in-lab">Nilai In-lab (0-100) — bobot 20%</label>
                            <input type="number" id="in-lab" name="in-lab" min="0" max="100" placeholder="contoh: 85">
                        </div>
                        <div class="form-group">
                            <label for="abstrak">Abstrak (0-100) — bobot 5%</label>
                            <input type="number" id="abstrak" name="abstrak" min="0" max="100" placeholder="contoh: 80">
                        </div>
                        <div class="form-group">
                            <label for="pendahuluan">Pendahuluan (0-100) — bobot 10%</label>
                            <input type="number" id="pendahuluan" name="pendahuluan" min="0" max="100" placeholder="contoh: 80">
                        </div>
                        <div class="form-group">
                            <label for="metodologi">Metodologi (0-100) — bobot 5%</label>
                            <input type="number" id="metodologi" name="metodologi" min="0" max="100" placeholder="contoh: 80">
                        </div>
                        <div class="form-group">
                            <label for="analisis-data-dan-perhitungan">Analisis data dan perhitungan (0-100) — bobot 20%</label>
                            <input type="number" id="analisis-data-dan-perhitungan" name="analisis-data-dan-perhitungan" min="0" max="100" placeholder="contoh: 80">
                        </div>
                        <div class="form-group">
                            <label for="pembahasan">Pembahasan (0-100) — bobot 25%</label>
                            <input type="number" id="pembahasan" name="pembahasan" min="0" max="100" placeholder="contoh: 80">
                        </div>
                        <div class="form-group">
                            <label for="kesimpulan">Kesimpulan (0-100) — bobot 10%</label>
                            <input type="number" id="kesimpulan" name="kesimpulan" min="0" max="100" placeholder="contoh: 80">
                        </div>
                        <div class="form-group">
                            <label for="format">Format (0-100) — bobot 5%</label>
                            <input type="number" id="format" name="format" min="0" max="100" placeholder="contoh: 80">
                        </div>
                        <div class="form-group">
                            <label for="plagiasi-ai">Plagiasi, dan tidak bisa mengurai AI (%) — pengurang 0-100</label>
                            <input type="number" id="plagiasi-ai" name="plagiasi-ai" min="0" max="100" placeholder="contoh: 0">
                        </div>
                        <div class="form-group full-width">
                            <label for="catatan">Catatan</label>
                            <textarea id="catatan" name="catatan" placeholder="Opsional: catatan untuk praktikan..."></textarea>
                        </div>
                        <div class="form-group full-width">
                            <small id="helper-text">Bobot: pre-lab 10%, in-lab 10%, abstrak 5%, pendahuluan 10%, metodologi 5%, analisis data dan perhitungan 20%, pembahasan 20%, kesimpulan 10%, format 5%. Pengurang: "Plagiasi, dan tidak bisa mengurai AI" (0%-100%) diterapkan setelah penjumlahan berbobot.</small>
                        </div>
                    </div>
                </div>
            </form>
        </section>

        <section class="assessment-history">
            <h2 class="history-title">Riwayat Penilaian</h2>
            <div class="history-actions">
                <button id="export-xlsx" class="export-btn" type="button" disabled>Unduh Nilai (XLSX)</button>
                <button id="export-xlsx-all" class="export-btn" type="button" disabled>Unduh Semua Nilai (XLSX)</button>
            </div>
            <div class="history-filters">
                <div class="form-group">
                    <label for="history-kelompok">Filter Kelompok</label>
                    <select id="history-kelompok" name="history-kelompok">
                        <option value="">Semua Kelompok</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="history-nrp">Filter NRP</label>
                    <select id="history-nrp" name="history-nrp" disabled>
                        <option value="">Semua NRP</option>
                    </select>
                </div>
            </div>
            <div class="history-table-wrapper">
            <table class="history-table">
                <thead>
                    <tr>
                        <th>Terakhir Diubah</th>
                        <th>Kelompok</th>
                        <th>NRP</th>
                        <th>Nama</th>
                        <th>Modul</th>
                        <th>Total (bobot)</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody id="history-body"></tbody>
            </table>
            </div>
        </section>
    </main>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="firebase-config.js"></script>
    <script src="sidebar.js"></script>
    <!-- SheetJS for XLSX export -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="penilaian.js"></script>
</body>

</html>


